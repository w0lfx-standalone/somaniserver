# üñ•Ô∏è somaniserver ‚Äî Full Server Context

This file provides a complete overview of the "somaniserver" project, a self-hosted infrastructure with no cloud dependency.

## 1. Physical Host Machine (Proxmox Server)

- **CPU**: Intel Core i3-6100
- **RAM**: 20 GB DDR4
- **Boot Drive**: 500 GB 2.5" SATA HDD
- **Data Drives**: 2 √ó 2 TB 3.5" surveillance-grade HDDs in a ZFS Mirror (RAID-1)
- **Host OS**: Proxmox VE

## 2. Virtualization Layer (Proxmox VE)

- Hosts two main VMs: TrueNAS SCALE and an Ubuntu Docker Host.
- Configured for auto power-on and sequential VM startup (TrueNAS first, then Ubuntu).

## 3. TrueNAS SCALE VM

- Manages a ZFS mirror pool named `swimming_pool`.
- Exports datasets (`/immich`, `/kasm`, `/media`, `/nextcloud`) via NFS.
- Uses a dedicated user `somaniserver` (UID 3000) and group `somanigroup` (GID 3001) for consistent permissions.

## 4. Ubuntu VM (Docker Host)

- Runs all containerized applications (Immich, Seafile, Kasm).
- Mounts the NFS shares from TrueNAS for persistent data storage.

## 5. Docker-Based Services

- **Immich**: Photo/video management system.
- **Seafile**: File hosting and synchronization.
- **Kasm Workspaces**: Containerized desktop environments.

## 6. Service Auto-Run (systemd)

- Custom systemd service files are used to ensure all Docker services start automatically on boot.

## 7. Remote Access

- **Tailscale**: Installed on all nodes (Proxmox, TrueNAS, Ubuntu) for secure, private remote access without exposing public ports.

## 8. External Automation

- A Raspberry Pi Zero 2 W runs n8n for server health monitoring and automation.

## 9. Disaster Recovery

- A comprehensive plan is in place, involving regular backups of critical configurations and data to a 128GB USB drive.

## 10. GitHub Repository

- The project's documentation and changelog are maintained in the `somaniserver` GitHub repository.
